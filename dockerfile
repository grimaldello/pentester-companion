FROM kalilinux/kali-rolling

RUN mkdir -p /pentester-companion

WORKDIR /pentester-companion

COPY *.py ./
COPY *.html ./
COPY *.txt ./

RUN apt update && apt install -y \
    curl \
    python3-pip \
    nmap \
    gobuster \
    seclists \
    && rm -rf /var/lib/apt/lists/*

RUN pip install -r requirements.txt

# Install rustscan and delete rustscan.deb
RUN curl -L https://github.com/RustScan/RustScan/releases/download/2.0.1/rustscan_2.0.1_amd64.deb --output rustscan_2.0.1_amd64.deb
RUN dpkg -i rustscan_2.0.1_amd64.deb && rm rustscan_2.0.1_amd64.deb

#CMD [ "python3", "app.py" ]

CMD gunicorn app:app --timeout 99999999 -b 0.0.0.0:6660 -w 4




